{"openapi":"3.0.0","info":{"title":"Hot Desking System API","version":"1.0.0","description":"RESTful API for hot desking and resource booking management system","contact":{"name":"API Support","email":"support@example.com"},"license":{"name":"MIT","url":"https://opensource.org/licenses/MIT"}},"servers":[{"url":"http://localhost:3001","description":"Development server"},{"url":"https://api.staging.example.com","description":"Staging server"},{"url":"https://api.example.com","description":"Production server"}],"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT","description":"Enter JWT token (format: Bearer <token>)"}},"responses":{"UnauthorizedError":{"description":"Authentication required or token invalid","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"statusCode":401,"data":{"errorCode":"AUTH002","errorMessage":"Authentication required"}}}}},"ForbiddenError":{"description":"Insufficient permissions","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"statusCode":403,"data":{"errorCode":"AUTH005","errorMessage":"Insufficient permissions"}}}}},"NotFoundError":{"description":"Resource not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"statusCode":404,"data":{"errorCode":"SYS004","errorMessage":"Resource not found"}}}}},"BadRequestError":{"description":"Invalid request parameters","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"statusCode":400,"data":{"errorCode":"VAL001","errorMessage":"Validation failed"}}}}},"ConflictError":{"description":"Resource conflict","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"},"example":{"statusCode":409,"data":{"errorCode":"BIZ001","errorMessage":"Resource already exists or conflict detected"}}}}}},"schemas":{"SuccessResponse":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","description":"Response data"}}},"PaginatedResponse":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"items":{"type":"array","items":{"type":"object"}},"pagination":{"type":"object","properties":{"page":{"type":"integer","example":1},"limit":{"type":"integer","example":20},"total":{"type":"integer","example":100},"totalPages":{"type":"integer","example":5}}}}}}},"ErrorResponse":{"type":"object","properties":{"statusCode":{"type":"integer","example":400},"data":{"type":"object","properties":{"errorCode":{"type":"string","example":"VAL001"},"errorMessage":{"type":"string","example":"Validation error message"}}}}},"Admin":{"type":"object","properties":{"id":{"type":"integer","example":1},"email":{"type":"string","format":"email","example":"admin@example.com"},"name":{"type":"string","example":"Admin User"},"phone":{"type":"string","example":"+1234567890","nullable":true},"role":{"type":"string","example":"admin"},"is_active":{"type":"boolean","example":true},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}}},"User":{"type":"object","properties":{"id":{"type":"integer","example":1},"email":{"type":"string","format":"email","example":"user@example.com"},"name":{"type":"string","example":"John Doe"},"phone":{"type":"string","example":"+1234567890","nullable":true},"employee_id":{"type":"string","example":"EMP001"},"department":{"type":"string","example":"Engineering","nullable":true},"role":{"type":"string","example":"user"},"is_active":{"type":"boolean","example":true},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}}},"Resource":{"type":"object","properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"Desk A-101"},"description":{"type":"string","example":"Corner desk with window view","nullable":true},"type":{"type":"string","enum":["SOLO","TEAM","PARKING"],"example":"SOLO"},"capacity":{"type":"integer","example":1},"pictures":{"type":"array","items":{"type":"string"},"example":["https://example.com/desk.jpg"]},"floor":{"type":"string","example":"5","nullable":true},"building":{"type":"string","example":"Building A","nullable":true},"amenities":{"type":"array","items":{"type":"string"},"example":["Monitor","Keyboard"]},"time_slot_granularity":{"type":"integer","example":30},"max_booking_duration":{"type":"integer","example":480,"nullable":true},"is_active":{"type":"boolean","example":true},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}}},"Booking":{"type":"object","properties":{"id":{"type":"integer","example":1},"resource_id":{"type":"integer","example":1},"user_id":{"type":"integer","example":1},"recurring_booking_id":{"type":"integer","example":1,"nullable":true},"booking_type":{"type":"string","enum":["FULL_DAY","HALF_DAY_AM","HALF_DAY_PM","HOURLY"],"example":"FULL_DAY"},"status":{"type":"string","enum":["ONHOLD","CONFIRMED","CANCELLED","COMPLETED","NO_SHOW"],"example":"CONFIRMED"},"start_time":{"type":"string","format":"date-time","example":"2026-02-01T09:00:00Z"},"end_time":{"type":"string","format":"date-time","example":"2026-02-01T17:00:00Z"},"reason":{"type":"string","example":"Project work","nullable":true},"notes":{"type":"string","example":"Prefer window seat","nullable":true},"created_at":{"type":"string","format":"date-time"},"updated_at":{"type":"string","format":"date-time"}}},"FloorPlan":{"type":"object","properties":{"id":{"type":"integer","example":1},"name":{"type":"string","example":"Building A - Floor 5"},"building":{"type":"string","nullable":true,"example":"Building A"},"floor":{"type":"string","nullable":true,"example":"5"},"image_url":{"type":"string","example":"/floor-plans/building-a-floor-5.png"},"image_width":{"type":"integer","nullable":true,"example":1920},"image_height":{"type":"integer","nullable":true,"example":1080},"is_active":{"type":"boolean","example":true},"created_at":{"type":"string","format":"date-time","example":"2024-01-31T10:00:00Z"},"updated_at":{"type":"string","format":"date-time","example":"2024-01-31T10:00:00Z"},"deleted_at":{"type":"string","format":"date-time","nullable":true,"example":null},"resources":{"type":"array","items":{"$ref":"#/components/schemas/Resource"}}}}}},"tags":[{"name":"Health","description":"System health check endpoints"},{"name":"Authentication","description":"User and admin authentication"},{"name":"Admins","description":"Admin management operations"},{"name":"Users","description":"User management operations"},{"name":"Resources","description":"Resource management and availability"},{"name":"Bookings","description":"Booking operations and management"},{"name":"Floor Plans","description":"Floor plan management and resource positioning"}],"paths":{"/api/admins":{"get":{"tags":["Admins"],"summary":"List all admins","description":"Get paginated list of all admins with optional filtering","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Page number"},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Items per page"},{"in":"query","name":"is_active","schema":{"type":"boolean"},"description":"Filter by active status"}],"responses":{"200":{"description":"List of admins retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/admins/{id}":{"get":{"tags":["Admins"],"summary":"Get admin by ID","description":"Retrieve a specific admin by their ID","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Admin ID"}],"responses":{"200":{"description":"Admin retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Admin"}}}}}},"404":{"description":"Admin not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"put":{"tags":["Admins"],"summary":"Update admin","description":"Update admin information","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Admin ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"Admin User"},"phone":{"type":"string","example":"+1234567890"},"email":{"type":"string","format":"email","example":"admin@example.com"}}}}}},"responses":{"200":{"description":"Admin updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Admin"}}}}}},"404":{"description":"Admin not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"delete":{"tags":["Admins"],"summary":"Delete admin","description":"Soft delete an admin (sets is_active to false)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Admin ID"}],"responses":{"200":{"description":"Admin deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"message":{"type":"string","example":"Admin deleted successfully"}}}}}}}},"404":{"description":"Admin not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/admins/{id}/activate":{"patch":{"tags":["Admins"],"summary":"Toggle admin active status","description":"Activate or deactivate an admin account","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Admin ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["is_active"],"properties":{"is_active":{"type":"boolean","example":true}}}}}},"responses":{"200":{"description":"Admin status updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Admin"}}}}}},"404":{"description":"Admin not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/auth/user/register":{"post":{"tags":["Authentication"],"summary":"Register new user","description":"Create a new user account","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password","name","employee_id"],"properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","format":"password","example":"User123!"},"name":{"type":"string","example":"John Doe"},"phone":{"type":"string","example":"+1234567890"},"employee_id":{"type":"string","example":"EMP001"},"department":{"type":"string","example":"Engineering"}}}}}},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":201},"data":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"},"token":{"type":"string","example":"jwt-token-placeholder"}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/auth/user/login":{"post":{"tags":["Authentication"],"summary":"User login","description":"Authenticate user and return token","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","format":"password","example":"User123!"}}}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"},"token":{"type":"string","example":"jwt-token-placeholder"}}}}}}}},"401":{"description":"Invalid credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/auth/admin/login":{"post":{"tags":["Authentication"],"summary":"Admin login","description":"Authenticate admin and return token","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","format":"email","example":"admin@example.com"},"password":{"type":"string","format":"password","example":"Admin123!"}}}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"admin":{"$ref":"#/components/schemas/Admin"},"token":{"type":"string","example":"jwt-token-placeholder"}}}}}}}},"401":{"description":"Invalid credentials","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings":{"get":{"tags":["Bookings"],"summary":"List all bookings","description":"Get paginated list of all bookings with optional filtering (Admin sees all, users see their own)","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Page number"},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Items per page"},{"in":"query","name":"status","schema":{"type":"string","enum":["ONHOLD","CONFIRMED","CANCELLED","COMPLETED","NO_SHOW"]},"description":"Filter by booking status"},{"in":"query","name":"resource_id","schema":{"type":"integer"},"description":"Filter by resource ID"},{"in":"query","name":"start_date","schema":{"type":"string","format":"date"},"description":"Filter bookings starting from this date"},{"in":"query","name":"end_date","schema":{"type":"string","format":"date"},"description":"Filter bookings until this date"}],"responses":{"200":{"description":"List of bookings retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/hold":{"post":{"tags":["Bookings"],"summary":"Create ONHOLD booking","description":"Reserve a resource slot for 10 minutes (Step 1 of two-step booking)","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["resource_id","booking_type","start_time","end_time"],"properties":{"resource_id":{"type":"integer","example":1},"booking_type":{"type":"string","enum":["FULL_DAY","HALF_DAY_AM","HALF_DAY_PM","HOURLY"],"example":"FULL_DAY"},"start_time":{"type":"string","format":"date-time","example":"2026-02-01T09:00:00Z"},"end_time":{"type":"string","format":"date-time","example":"2026-02-01T17:00:00Z"}}}}}},"responses":{"201":{"description":"Booking held successfully (expires in 10 minutes)","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":201},"data":{"allOf":[{"$ref":"#/components/schemas/Booking"},{"type":"object","properties":{"hold_expires_at":{"type":"string","format":"date-time","example":"2026-02-01T09:10:00Z"}}}]}}}}}},"400":{"description":"Validation error or resource unavailable","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/{id}":{"get":{"tags":["Bookings"],"summary":"Get booking by ID","description":"Retrieve a specific booking by its ID","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Booking ID"}],"responses":{"200":{"description":"Booking retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Booking"}}}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"put":{"tags":["Bookings"],"summary":"Update booking","description":"Update booking details (notes, reason, etc.)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Booking ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"reason":{"type":"string","example":"Project work"},"notes":{"type":"string","example":"Prefer window seat"}}}}}},"responses":{"200":{"description":"Booking updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Booking"}}}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/{id}/confirm":{"patch":{"tags":["Bookings"],"summary":"Confirm ONHOLD booking","description":"Confirm a booking within 10 minutes (Step 2 of two-step booking)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Booking ID"}],"responses":{"200":{"description":"Booking confirmed successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Booking"}}}}}},"400":{"description":"Booking expired or already confirmed","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/{id}/cancel":{"patch":{"tags":["Bookings"],"summary":"Cancel booking","description":"Cancel a booking (status changes to CANCELLED)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Booking ID"}],"responses":{"200":{"description":"Booking cancelled successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Booking"}}}}}},"400":{"description":"Cannot cancel completed booking","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/{id}/no-show":{"patch":{"tags":["Bookings"],"summary":"Mark booking as no-show","description":"Mark a booking as no-show (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Booking ID"}],"responses":{"200":{"description":"Booking marked as no-show","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Booking"}}}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/{id}/complete":{"patch":{"tags":["Bookings"],"summary":"Complete booking","description":"Mark a booking as completed (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Booking ID"}],"responses":{"200":{"description":"Booking marked as completed","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Booking"}}}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/recurring":{"post":{"tags":["Bookings"],"summary":"Create recurring booking","description":"Create a recurring booking pattern","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["resource_id","booking_type","start_time","end_time","recurrence_pattern","recurrence_end_date"],"properties":{"resource_id":{"type":"integer","example":1},"booking_type":{"type":"string","enum":["FULL_DAY","HALF_DAY_AM","HALF_DAY_PM","HOURLY"],"example":"FULL_DAY"},"start_time":{"type":"string","format":"date-time","example":"2026-02-01T09:00:00Z"},"end_time":{"type":"string","format":"date-time","example":"2026-02-01T17:00:00Z"},"recurrence_pattern":{"type":"string","enum":["DAILY","WEEKLY","MONTHLY"],"example":"WEEKLY"},"recurrence_end_date":{"type":"string","format":"date","example":"2026-03-01"},"reason":{"type":"string","example":"Regular project work"}}}}}},"responses":{"201":{"description":"Recurring booking created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":201},"data":{"type":"object","properties":{"recurring_booking_id":{"type":"integer","example":1},"created_bookings":{"type":"array","items":{"$ref":"#/components/schemas/Booking"}},"failed_dates":{"type":"array","items":{"type":"string","format":"date"}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/recurring/{id}":{"get":{"tags":["Bookings"],"summary":"Get recurring booking details","description":"Get details of a recurring booking pattern","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Recurring booking ID"}],"responses":{"200":{"description":"Recurring booking details retrieved","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"id":{"type":"integer"},"resource_id":{"type":"integer"},"user_id":{"type":"integer"},"recurrence_pattern":{"type":"string","enum":["DAILY","WEEKLY","MONTHLY"]},"bookings":{"type":"array","items":{"$ref":"#/components/schemas/Booking"}}}}}}}}},"404":{"description":"Recurring booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"delete":{"tags":["Bookings"],"summary":"Cancel recurring booking","description":"Cancel all future bookings in a recurring pattern","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Recurring booking ID"}],"responses":{"200":{"description":"Recurring booking cancelled successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"message":{"type":"string","example":"Recurring booking cancelled successfully"},"cancelled_count":{"type":"integer","example":5}}}}}}}},"404":{"description":"Recurring booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"put":{"tags":["Bookings"],"summary":"Update recurring booking","description":"Update recurring booking pattern details","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Recurring booking ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"recurrence_end_date":{"type":"string","format":"date","example":"2026-04-01"},"reason":{"type":"string","example":"Updated project duration"}}}}}},"responses":{"200":{"description":"Recurring booking updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object"}}}}}},"404":{"description":"Recurring booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/upcoming":{"get":{"tags":["Bookings"],"summary":"Get upcoming bookings","description":"Get list of upcoming bookings for authenticated user","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1}},{"in":"query","name":"limit","schema":{"type":"integer","default":20}}],"responses":{"200":{"description":"Upcoming bookings retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/history":{"get":{"tags":["Bookings"],"summary":"Get booking history","description":"Get past bookings for authenticated user","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1}},{"in":"query","name":"limit","schema":{"type":"integer","default":20}}],"responses":{"200":{"description":"Booking history retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/{id}/detach":{"delete":{"tags":["Bookings"],"summary":"Detach booking from recurring","description":"Detach a single booking from its recurring pattern","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Booking ID"}],"responses":{"200":{"description":"Booking detached successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"message":{"type":"string","example":"Booking detached from recurring pattern"}}}}}}}},"404":{"description":"Booking not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/bookings/cleanup-expired":{"post":{"tags":["Bookings"],"summary":"Cleanup expired holds","description":"System endpoint to cleanup expired ONHOLD bookings (Admin only)","security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Expired holds cleaned up successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"message":{"type":"string","example":"Expired holds cleaned up"},"count":{"type":"integer","example":5,"description":"Number of bookings cancelled"}}}}}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/floor-plans":{"get":{"tags":["Floor Plans"],"summary":"List all floor plans","description":"Get a paginated list of all floor plans with optional filtering","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Page number for pagination"},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Number of items per page"},{"in":"query","name":"building","schema":{"type":"string"},"description":"Filter by building name"},{"in":"query","name":"floor","schema":{"type":"string"},"description":"Filter by floor"},{"in":"query","name":"is_active","schema":{"type":"string","enum":[true,false]},"description":"Filter by active status"}],"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/PaginatedResponse"},{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/FloorPlan"}}}}]}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"}}},"post":{"tags":["Floor Plans"],"summary":"Create a new floor plan","description":"Create a new floor plan (Admin only)","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","image_url"],"properties":{"name":{"type":"string","maxLength":255,"example":"Building A - Floor 5"},"building":{"type":"string","maxLength":100,"example":"Building A"},"floor":{"type":"string","maxLength":50,"example":"5"},"image_url":{"type":"string","maxLength":500,"example":"/floor-plans/building-a-floor-5.png"},"image_width":{"type":"integer","minimum":1,"example":1920},"image_height":{"type":"integer","minimum":1,"example":1080}}}}}},"responses":{"201":{"description":"Floor plan created successfully","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SuccessResponse"},{"type":"object","properties":{"data":{"$ref":"#/components/schemas/FloorPlan"}}}]}}}},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"}}}},"/api/floor-plans/{id}":{"get":{"tags":["Floor Plans"],"summary":"Get floor plan by ID","description":"Retrieve a specific floor plan with all related resources","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Floor plan ID"}],"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SuccessResponse"},{"type":"object","properties":{"data":{"$ref":"#/components/schemas/FloorPlan"}}}]}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"}}},"put":{"tags":["Floor Plans"],"summary":"Update floor plan","description":"Update an existing floor plan (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Floor plan ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","maxLength":255},"building":{"type":"string","maxLength":100},"floor":{"type":"string","maxLength":50},"image_url":{"type":"string","maxLength":500},"image_width":{"type":"integer","minimum":1},"image_height":{"type":"integer","minimum":1},"is_active":{"type":"boolean"}}}}}},"responses":{"200":{"description":"Floor plan updated successfully","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SuccessResponse"},{"type":"object","properties":{"data":{"$ref":"#/components/schemas/FloorPlan"}}}]}}}},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"}}},"delete":{"tags":["Floor Plans"],"summary":"Delete floor plan","description":"Soft delete a floor plan (Admin only). Resources will be unlinked from this floor plan.","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Floor plan ID"}],"responses":{"200":{"description":"Floor plan deleted successfully","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SuccessResponse"},{"type":"object","properties":{"data":{"type":"object","properties":{"message":{"type":"string","example":"Floor plan deleted successfully"}}}}}]}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"}}}},"/api/floor-plans/{id}/activate":{"patch":{"tags":["Floor Plans"],"summary":"Toggle floor plan active status","description":"Activate or deactivate a floor plan (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Floor plan ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["is_active"],"properties":{"is_active":{"type":"boolean","example":true}}}}}},"responses":{"200":{"description":"Floor plan status updated successfully","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SuccessResponse"},{"type":"object","properties":{"data":{"$ref":"#/components/schemas/FloorPlan"}}}]}}}},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"}}}},"/api/floor-plans/{id}/resources":{"get":{"tags":["Floor Plans"],"summary":"Get all resources on floor plan","description":"Retrieve all resources positioned on a specific floor plan","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Floor plan ID"}],"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SuccessResponse"},{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Resource"}}}}]}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"},"404":{"$ref":"#/components/responses/NotFoundError"}}}},"/api/resources/{id}/position":{"patch":{"tags":["Resources"],"summary":"Update resource position on floor plan","description":"Link a resource to a floor plan and set its position coordinates (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["floor_plan_id"],"properties":{"floor_plan_id":{"type":"integer","nullable":true,"description":"Floor plan ID to link resource to, or null to unlink","example":1},"position_x":{"type":"number","format":"decimal","nullable":true,"minimum":0,"description":"X coordinate on floor plan (pixels from left)","example":150.5},"position_y":{"type":"number","format":"decimal","nullable":true,"minimum":0,"description":"Y coordinate on floor plan (pixels from top)","example":200.75}}}}}},"responses":{"200":{"description":"Resource position updated successfully","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SuccessResponse"},{"type":"object","properties":{"data":{"$ref":"#/components/schemas/Resource"}}}]}}}},"400":{"$ref":"#/components/responses/BadRequestError"},"401":{"$ref":"#/components/responses/UnauthorizedError"},"403":{"$ref":"#/components/responses/ForbiddenError"},"404":{"$ref":"#/components/responses/NotFoundError"}}}},"/api/resources/by-floor-plan/{id}":{"get":{"tags":["Resources"],"summary":"Get resources by floor plan","description":"Retrieve all resources linked to a specific floor plan","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Floor plan ID"}],"responses":{"200":{"description":"Successful response","content":{"application/json":{"schema":{"allOf":[{"$ref":"#/components/schemas/SuccessResponse"},{"type":"object","properties":{"data":{"type":"array","items":{"$ref":"#/components/schemas/Resource"}}}}]}}}},"401":{"$ref":"#/components/responses/UnauthorizedError"}}}},"/api/health":{"get":{"tags":["Health"],"summary":"Check API health status","description":"Returns the health status of the API server including uptime","responses":{"200":{"description":"Server is healthy","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"status":{"type":"string","example":"ok"},"timestamp":{"type":"string","format":"date-time","example":"2026-01-31T08:00:00.000Z"},"uptime":{"type":"number","example":123.45}}}}}}}}}}},"/api/resources":{"get":{"tags":["Resources"],"summary":"List all resources","description":"Get paginated list of all resources with optional filtering","parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Page number"},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Items per page"},{"in":"query","name":"type","schema":{"type":"string","enum":["SOLO","TEAM","PARKING"]},"description":"Filter by resource type"},{"in":"query","name":"floor","schema":{"type":"string"},"description":"Filter by floor"},{"in":"query","name":"building","schema":{"type":"string"},"description":"Filter by building"},{"in":"query","name":"is_active","schema":{"type":"boolean","default":true},"description":"Filter by active status"}],"responses":{"200":{"description":"List of resources retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}}}},"post":{"tags":["Resources"],"summary":"Create resource","description":"Create a new resource (Admin only)","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["name","type","capacity"],"properties":{"name":{"type":"string","example":"Desk A-101"},"description":{"type":"string","example":"Corner desk with window view"},"type":{"type":"string","enum":["SOLO","TEAM","PARKING"],"example":"SOLO"},"capacity":{"type":"integer","example":1},"pictures":{"type":"array","items":{"type":"string"},"example":["https://example.com/desk.jpg"]},"floor":{"type":"string","example":"5"},"building":{"type":"string","example":"Building A"},"amenities":{"type":"array","items":{"type":"string"},"example":["Monitor","Keyboard"]},"time_slot_granularity":{"type":"integer","example":30,"description":"Time slot granularity in minutes"},"max_booking_duration":{"type":"integer","example":480,"description":"Maximum booking duration in minutes"}}}}}},"responses":{"201":{"description":"Resource created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":201},"data":{"$ref":"#/components/schemas/Resource"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/resources/{id}":{"get":{"tags":["Resources"],"summary":"Get resource by ID","description":"Retrieve a specific resource by its ID","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"}],"responses":{"200":{"description":"Resource retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Resource"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"put":{"tags":["Resources"],"summary":"Update resource","description":"Update resource information (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string"},"description":{"type":"string"},"type":{"type":"string","enum":["SOLO","TEAM","PARKING"]},"capacity":{"type":"integer"},"pictures":{"type":"array","items":{"type":"string"}},"floor":{"type":"string"},"building":{"type":"string"},"amenities":{"type":"array","items":{"type":"string"}},"time_slot_granularity":{"type":"integer"},"max_booking_duration":{"type":"integer"}}}}}},"responses":{"200":{"description":"Resource updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Resource"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"delete":{"tags":["Resources"],"summary":"Delete resource","description":"Soft delete a resource (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"}],"responses":{"200":{"description":"Resource deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"message":{"type":"string","example":"Resource deleted successfully"}}}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/resources/{id}/activate":{"patch":{"tags":["Resources"],"summary":"Toggle resource active status","description":"Activate or deactivate a resource (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["is_active"],"properties":{"is_active":{"type":"boolean","example":true}}}}}},"responses":{"200":{"description":"Resource status updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/Resource"}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/resources/{id}/availability":{"get":{"tags":["Resources"],"summary":"Check resource availability","description":"Check if a resource is available for booking in a time range","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"},{"in":"query","name":"start_time","required":true,"schema":{"type":"string","format":"date-time"},"description":"Start time for availability check"},{"in":"query","name":"end_time","required":true,"schema":{"type":"string","format":"date-time"},"description":"End time for availability check"}],"responses":{"200":{"description":"Availability information retrieved","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"available":{"type":"boolean","example":true},"conflicting_bookings":{"type":"array","items":{"$ref":"#/components/schemas/Booking"}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/resources/availability/batch":{"post":{"tags":["Resources"],"summary":"Batch check resource availability","description":"Check availability for multiple resources at once","requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["resource_ids","start_time","end_time"],"properties":{"resource_ids":{"type":"array","items":{"type":"integer"},"example":[1,2,3]},"start_time":{"type":"string","format":"date-time","example":"2026-02-01T09:00:00Z"},"end_time":{"type":"string","format":"date-time","example":"2026-02-01T17:00:00Z"}}}}}},"responses":{"200":{"description":"Batch availability check completed","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"array","items":{"type":"object","properties":{"resource_id":{"type":"integer"},"available":{"type":"boolean"},"conflicting_bookings":{"type":"array"}}}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/resources/{id}/bookings":{"get":{"tags":["Resources"],"summary":"Get resource bookings","description":"Retrieve all bookings for a specific resource","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"},{"in":"query","name":"start_date","schema":{"type":"string","format":"date"},"description":"Filter bookings starting from this date"},{"in":"query","name":"end_date","schema":{"type":"string","format":"date"},"description":"Filter bookings until this date"},{"in":"query","name":"page","schema":{"type":"integer","default":1}},{"in":"query","name":"limit","schema":{"type":"integer","default":20}}],"responses":{"200":{"description":"Resource bookings retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/resources/search":{"get":{"tags":["Resources"],"summary":"Search available resources","description":"Search for available resources based on type, location, and time range","parameters":[{"in":"query","name":"type","schema":{"type":"string","enum":["SOLO","TEAM","PARKING"]}},{"in":"query","name":"floor","schema":{"type":"string"}},{"in":"query","name":"building","schema":{"type":"string"}},{"in":"query","name":"start_time","required":true,"schema":{"type":"string","format":"date-time"}},{"in":"query","name":"end_time","required":true,"schema":{"type":"string","format":"date-time"}},{"in":"query","name":"page","schema":{"type":"integer","default":1}},{"in":"query","name":"limit","schema":{"type":"integer","default":20}}],"responses":{"200":{"description":"Available resources found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/resources/{id}/operating-hours":{"get":{"tags":["Resources"],"summary":"Get resource operating hours","description":"Retrieve the weekly operating hours schedule for a resource","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"}],"responses":{"200":{"description":"Operating hours retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer","example":1},"resource_id":{"type":"integer","example":1},"day_of_week":{"type":"integer","example":1,"description":"0=Sunday, 1=Monday, ..., 6=Saturday"},"start_time":{"type":"string","example":"09:00:00"},"end_time":{"type":"string","example":"18:00:00"},"is_available":{"type":"boolean","example":true}}}}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"post":{"tags":["Resources"],"summary":"Set resource operating hours","description":"Set or bulk update the weekly operating hours for a resource (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["operating_hours"],"properties":{"operating_hours":{"type":"array","items":{"type":"object","required":["day_of_week","start_time","end_time"],"properties":{"day_of_week":{"type":"integer","minimum":0,"maximum":6,"example":1,"description":"0=Sunday, 1=Monday, ..., 6=Saturday"},"start_time":{"type":"string","example":"09:00:00"},"end_time":{"type":"string","example":"18:00:00"},"is_available":{"type":"boolean","default":true,"example":true}}}}},"example":{"operating_hours":[{"day_of_week":1,"start_time":"09:00:00","end_time":"18:00:00","is_available":true},{"day_of_week":2,"start_time":"09:00:00","end_time":"18:00:00","is_available":true}]}}}}},"responses":{"200":{"description":"Operating hours set successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"array","items":{"type":"object"}}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/resources/{id}/operating-hours/{hourId}":{"put":{"tags":["Resources"],"summary":"Update single operating hour","description":"Update a specific operating hour entry (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"},{"in":"path","name":"hourId","required":true,"schema":{"type":"integer"},"description":"Operating hour ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"start_time":{"type":"string","example":"08:00:00"},"end_time":{"type":"string","example":"20:00:00"},"is_available":{"type":"boolean","example":true}}}}}},"responses":{"200":{"description":"Operating hour updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object"}}}}}},"404":{"description":"Operating hour not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"delete":{"tags":["Resources"],"summary":"Delete operating hour","description":"Delete a specific operating hour entry (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"},{"in":"path","name":"hourId","required":true,"schema":{"type":"integer"},"description":"Operating hour ID"}],"responses":{"200":{"description":"Operating hour deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"message":{"type":"string","example":"Operating hour deleted successfully"}}}}}}}},"404":{"description":"Operating hour not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/resources/{id}/availability-overrides":{"get":{"tags":["Resources"],"summary":"Get availability overrides","description":"Retrieve availability overrides for a resource within a date range","parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"},{"in":"query","name":"start_date","schema":{"type":"string","format":"date"},"description":"Start date for override query"},{"in":"query","name":"end_date","schema":{"type":"string","format":"date"},"description":"End date for override query"}],"responses":{"200":{"description":"Availability overrides retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"array","items":{"type":"object","properties":{"id":{"type":"integer","example":1},"resource_id":{"type":"integer","example":1},"override_date":{"type":"string","format":"date","example":"2026-02-15"},"start_time":{"type":"string","example":"09:00:00","nullable":true},"end_time":{"type":"string","example":"17:00:00","nullable":true},"is_available":{"type":"boolean","example":false},"reason":{"type":"string","example":"Maintenance scheduled"},"created_by":{"type":"integer","example":1}}}}}}}}},"404":{"description":"Resource not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"post":{"tags":["Resources"],"summary":"Create availability override","description":"Create an availability override to block or force availability on specific dates (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["override_date","is_available","reason","created_by"],"properties":{"override_date":{"type":"string","format":"date","example":"2026-02-15"},"start_time":{"type":"string","example":"09:00:00","nullable":true,"description":"Optional - null means all day"},"end_time":{"type":"string","example":"17:00:00","nullable":true,"description":"Optional - null means all day"},"is_available":{"type":"boolean","example":false,"description":"false = block resource, true = force available"},"reason":{"type":"string","example":"Maintenance scheduled"},"created_by":{"type":"integer","example":1,"description":"Admin user ID"}}}}}},"responses":{"201":{"description":"Availability override created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":201},"data":{"type":"object"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/resources/{id}/availability-overrides/{overrideId}":{"delete":{"tags":["Resources"],"summary":"Delete availability override","description":"Remove an availability override (Admin only)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"Resource ID"},{"in":"path","name":"overrideId","required":true,"schema":{"type":"integer"},"description":"Override ID"}],"responses":{"200":{"description":"Availability override deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"message":{"type":"string","example":"Availability override deleted successfully"}}}}}}}},"404":{"description":"Override not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/users":{"get":{"tags":["Users"],"summary":"List all users","description":"Get paginated list of all users with optional filtering","security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","default":1},"description":"Page number"},{"in":"query","name":"limit","schema":{"type":"integer","default":20},"description":"Items per page"},{"in":"query","name":"department","schema":{"type":"string"},"description":"Filter by department"},{"in":"query","name":"is_active","schema":{"type":"boolean"},"description":"Filter by active status"},{"in":"query","name":"search","schema":{"type":"string"},"description":"Search by name or email"}],"responses":{"200":{"description":"List of users retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"401":{"description":"Unauthorized","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"post":{"tags":["Users"],"summary":"Create user","description":"Create a new user (Admin only)","security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["email","password","name","employee_id"],"properties":{"email":{"type":"string","format":"email","example":"user@example.com"},"password":{"type":"string","format":"password","example":"User123!"},"name":{"type":"string","example":"John Doe"},"phone":{"type":"string","example":"+1234567890"},"employee_id":{"type":"string","example":"EMP001"},"department":{"type":"string","example":"Engineering"}}}}}},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":201},"data":{"$ref":"#/components/schemas/User"}}}}}},"400":{"description":"Validation error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/users/{id}":{"get":{"tags":["Users"],"summary":"Get user by ID","description":"Retrieve a specific user by their ID","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"User ID"}],"responses":{"200":{"description":"User retrieved successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/User"}}}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"put":{"tags":["Users"],"summary":"Update user","description":"Update user information","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","properties":{"name":{"type":"string","example":"John Doe"},"phone":{"type":"string","example":"+1234567890"},"email":{"type":"string","format":"email","example":"user@example.com"},"department":{"type":"string","example":"Engineering"}}}}}},"responses":{"200":{"description":"User updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/User"}}}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}},"delete":{"tags":["Users"],"summary":"Delete user","description":"Soft delete a user (sets is_active to false)","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"User ID"}],"responses":{"200":{"description":"User deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"type":"object","properties":{"message":{"type":"string","example":"User deleted successfully"}}}}}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/users/{id}/activate":{"patch":{"tags":["Users"],"summary":"Toggle user active status","description":"Activate or deactivate a user account","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"User ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"type":"object","required":["is_active"],"properties":{"is_active":{"type":"boolean","example":true}}}}}},"responses":{"200":{"description":"User status updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"statusCode":{"type":"integer","example":200},"data":{"$ref":"#/components/schemas/User"}}}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/users/{id}/bookings":{"get":{"tags":["Users"],"summary":"Get user bookings","description":"Retrieve all bookings for a specific user","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"User ID"},{"in":"query","name":"page","schema":{"type":"integer","default":1}},{"in":"query","name":"limit","schema":{"type":"integer","default":20}}],"responses":{"200":{"description":"User bookings retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}},"/api/users/{id}/recurring-bookings":{"get":{"tags":["Users"],"summary":"Get user recurring bookings","description":"Retrieve all recurring bookings for a specific user","security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","required":true,"schema":{"type":"integer"},"description":"User ID"},{"in":"query","name":"page","schema":{"type":"integer","default":1}},{"in":"query","name":"limit","schema":{"type":"integer","default":20}}],"responses":{"200":{"description":"User recurring bookings retrieved successfully","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaginatedResponse"}}}},"404":{"description":"User not found","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ErrorResponse"}}}}}}}}}